{"dependencies":[{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":17,"index":922},"end":{"line":16,"column":41,"index":946}}],"key":"+GSAvg/CWfG2ifOQrWLkai/D9hY=","exportNames":["*"],"imports":1}},{"name":"./StreamDownloadBuilder","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":48,"index":996},"end":{"line":17,"column":82,"index":1030}}],"key":"J2qh5zRhKrS/71C3urjbsL+bmGQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  var __importDefault = this && this.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : {\n      \"default\": mod\n    };\n  };\n  var _a;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  const errors_1 = require(_dependencyMap[0], \"../lib/errors\");\n  const StreamDownloadBuilder_1 = __importDefault(require(_dependencyMap[1], \"./StreamDownloadBuilder\"));\n  class BlobDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n      this[_a] = 'BlobDownloadBuilder';\n      this.promise = null;\n    }\n    asStream() {\n      return new StreamDownloadBuilder_1.default(this.downloadFn, this.shouldThrowOnError);\n    }\n    then(onfulfilled, onrejected) {\n      return this.getPromise().then(onfulfilled, onrejected);\n    }\n    catch(onrejected) {\n      return this.getPromise().catch(onrejected);\n    }\n    finally(onfinally) {\n      return this.getPromise().finally(onfinally);\n    }\n    getPromise() {\n      if (!this.promise) {\n        this.promise = this.execute();\n      }\n      return this.promise;\n    }\n    execute() {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: yield result.blob(),\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, errors_1.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  _a = Symbol.toStringTag;\n  exports.default = BlobDownloadBuilder;\n});","lineCount":92,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"__awaiter"],[4,15,2,13],[4,18,2,17],[4,22,2,21],[4,26,2,25],[4,30,2,29],[4,31,2,30,"__awaiter"],[4,40,2,39],[4,44,2,44],[4,54,2,54,"thisArg"],[4,61,2,61],[4,63,2,63,"_arguments"],[4,73,2,73],[4,75,2,75,"P"],[4,76,2,76],[4,78,2,78,"generator"],[4,87,2,87],[4,89,2,89],[5,4,3,4],[5,13,3,13,"adopt"],[5,18,3,18,"adopt"],[5,19,3,19,"value"],[5,24,3,24],[5,26,3,26],[6,6,3,28],[6,13,3,35,"value"],[6,18,3,40],[6,30,3,52,"P"],[6,31,3,53],[6,34,3,56,"value"],[6,39,3,61],[6,42,3,64],[6,46,3,68,"P"],[6,47,3,69],[6,48,3,70],[6,58,3,80,"resolve"],[6,65,3,87],[6,67,3,89],[7,8,3,91,"resolve"],[7,15,3,98],[7,16,3,99,"value"],[7,21,3,104],[7,22,3,105],[8,6,3,107],[8,7,3,108],[8,8,3,109],[9,4,3,111],[10,4,4,4],[10,11,4,11],[10,16,4,16,"P"],[10,17,4,17],[10,22,4,22,"P"],[10,23,4,23],[10,26,4,26,"Promise"],[10,33,4,33],[10,34,4,34],[10,36,4,36],[10,46,4,46,"resolve"],[10,53,4,53],[10,55,4,55,"reject"],[10,61,4,61],[10,63,4,63],[11,6,5,8],[11,15,5,17,"fulfilled"],[11,24,5,26,"fulfilled"],[11,25,5,27,"value"],[11,30,5,32],[11,32,5,34],[12,8,5,36],[12,12,5,40],[13,10,5,42,"step"],[13,14,5,46],[13,15,5,47,"generator"],[13,24,5,56],[13,25,5,57,"next"],[13,29,5,61],[13,30,5,62,"value"],[13,35,5,67],[13,36,5,68],[13,37,5,69],[14,8,5,71],[14,9,5,72],[14,10,5,73],[14,17,5,80,"e"],[14,18,5,81],[14,20,5,83],[15,10,5,85,"reject"],[15,16,5,91],[15,17,5,92,"e"],[15,18,5,93],[15,19,5,94],[16,8,5,96],[17,6,5,98],[18,6,6,8],[18,15,6,17,"rejected"],[18,23,6,25,"rejected"],[18,24,6,26,"value"],[18,29,6,31],[18,31,6,33],[19,8,6,35],[19,12,6,39],[20,10,6,41,"step"],[20,14,6,45],[20,15,6,46,"generator"],[20,24,6,55],[20,25,6,56],[20,32,6,63],[20,33,6,64],[20,34,6,65,"value"],[20,39,6,70],[20,40,6,71],[20,41,6,72],[21,8,6,74],[21,9,6,75],[21,10,6,76],[21,17,6,83,"e"],[21,18,6,84],[21,20,6,86],[22,10,6,88,"reject"],[22,16,6,94],[22,17,6,95,"e"],[22,18,6,96],[22,19,6,97],[23,8,6,99],[24,6,6,101],[25,6,7,8],[25,15,7,17,"step"],[25,19,7,21,"step"],[25,20,7,22,"result"],[25,26,7,28],[25,28,7,30],[26,8,7,32,"result"],[26,14,7,38],[26,15,7,39,"done"],[26,19,7,43],[26,22,7,46,"resolve"],[26,29,7,53],[26,30,7,54,"result"],[26,36,7,60],[26,37,7,61,"value"],[26,42,7,66],[26,43,7,67],[26,46,7,70,"adopt"],[26,51,7,75],[26,52,7,76,"result"],[26,58,7,82],[26,59,7,83,"value"],[26,64,7,88],[26,65,7,89],[26,66,7,90,"then"],[26,70,7,94],[26,71,7,95,"fulfilled"],[26,80,7,104],[26,82,7,106,"rejected"],[26,90,7,114],[26,91,7,115],[27,6,7,117],[28,6,8,8,"step"],[28,10,8,12],[28,11,8,13],[28,12,8,14,"generator"],[28,21,8,23],[28,24,8,26,"generator"],[28,33,8,35],[28,34,8,36,"apply"],[28,39,8,41],[28,40,8,42,"thisArg"],[28,47,8,49],[28,49,8,51,"_arguments"],[28,59,8,61],[28,63,8,65],[28,65,8,67],[28,66,8,68],[28,68,8,70,"next"],[28,72,8,74],[28,73,8,75],[28,74,8,76],[28,75,8,77],[29,4,9,4],[29,5,9,5],[29,6,9,6],[30,2,10,0],[30,3,10,1],[31,2,11,0],[31,6,11,4,"__importDefault"],[31,21,11,19],[31,24,11,23],[31,28,11,27],[31,32,11,31],[31,36,11,35],[31,37,11,36,"__importDefault"],[31,52,11,51],[31,56,11,56],[31,66,11,66,"mod"],[31,69,11,69],[31,71,11,71],[32,4,12,4],[32,11,12,12,"mod"],[32,14,12,15],[32,18,12,19,"mod"],[32,21,12,22],[32,22,12,23,"__esModule"],[32,32,12,33],[32,35,12,37,"mod"],[32,38,12,40],[32,41,12,43],[33,6,12,45],[33,15,12,54],[33,17,12,56,"mod"],[34,4,12,60],[34,5,12,61],[35,2,13,0],[35,3,13,1],[36,2,14,0],[36,6,14,4,"_a"],[36,8,14,6],[37,2,15,0,"Object"],[37,8,15,6],[37,9,15,7,"defineProperty"],[37,23,15,21],[37,24,15,22,"exports"],[37,31,15,29],[37,33,15,31],[37,45,15,43],[37,47,15,45],[38,4,15,47,"value"],[38,9,15,52],[38,11,15,54],[39,2,15,59],[39,3,15,60],[39,4,15,61],[40,2,16,0],[40,8,16,6,"errors_1"],[40,16,16,14],[40,19,16,17,"require"],[40,26,16,24],[40,27,16,24,"_dependencyMap"],[40,41,16,24],[40,61,16,40],[40,62,16,41],[41,2,17,0],[41,8,17,6,"StreamDownloadBuilder_1"],[41,31,17,29],[41,34,17,32,"__importDefault"],[41,49,17,47],[41,50,17,48,"require"],[41,57,17,55],[41,58,17,55,"_dependencyMap"],[41,72,17,55],[41,102,17,81],[41,103,17,82],[41,104,17,83],[42,2,18,0],[42,8,18,6,"BlobDownloadBuilder"],[42,27,18,25],[42,28,18,26],[43,4,19,4,"constructor"],[43,15,19,15,"constructor"],[43,16,19,16,"downloadFn"],[43,26,19,26],[43,28,19,28,"shouldThrowOnError"],[43,46,19,46],[43,48,19,48],[44,6,20,8],[44,10,20,12],[44,11,20,13,"downloadFn"],[44,21,20,23],[44,24,20,26,"downloadFn"],[44,34,20,36],[45,6,21,8],[45,10,21,12],[45,11,21,13,"shouldThrowOnError"],[45,29,21,31],[45,32,21,34,"shouldThrowOnError"],[45,50,21,52],[46,6,22,8],[46,10,22,12],[46,11,22,13,"_a"],[46,13,22,15],[46,14,22,16],[46,17,22,19],[46,38,22,40],[47,6,23,8],[47,10,23,12],[47,11,23,13,"promise"],[47,18,23,20],[47,21,23,23],[47,25,23,27],[48,4,24,4],[49,4,25,4,"asStream"],[49,12,25,12,"asStream"],[49,13,25,12],[49,15,25,15],[50,6,26,8],[50,13,26,15],[50,17,26,19,"StreamDownloadBuilder_1"],[50,40,26,42],[50,41,26,43,"default"],[50,48,26,50],[50,49,26,51],[50,53,26,55],[50,54,26,56,"downloadFn"],[50,64,26,66],[50,66,26,68],[50,70,26,72],[50,71,26,73,"shouldThrowOnError"],[50,89,26,91],[50,90,26,92],[51,4,27,4],[52,4,28,4,"then"],[52,8,28,8,"then"],[52,9,28,9,"onfulfilled"],[52,20,28,20],[52,22,28,22,"onrejected"],[52,32,28,32],[52,34,28,34],[53,6,29,8],[53,13,29,15],[53,17,29,19],[53,18,29,20,"getPromise"],[53,28,29,30],[53,29,29,31],[53,30,29,32],[53,31,29,33,"then"],[53,35,29,37],[53,36,29,38,"onfulfilled"],[53,47,29,49],[53,49,29,51,"onrejected"],[53,59,29,61],[53,60,29,62],[54,4,30,4],[55,4,31,4,"catch"],[55,9,31,9,"catch"],[55,10,31,10,"onrejected"],[55,20,31,20],[55,22,31,22],[56,6,32,8],[56,13,32,15],[56,17,32,19],[56,18,32,20,"getPromise"],[56,28,32,30],[56,29,32,31],[56,30,32,32],[56,31,32,33,"catch"],[56,36,32,38],[56,37,32,39,"onrejected"],[56,47,32,49],[56,48,32,50],[57,4,33,4],[58,4,34,4,"finally"],[58,11,34,11,"finally"],[58,12,34,12,"onfinally"],[58,21,34,21],[58,23,34,23],[59,6,35,8],[59,13,35,15],[59,17,35,19],[59,18,35,20,"getPromise"],[59,28,35,30],[59,29,35,31],[59,30,35,32],[59,31,35,33,"finally"],[59,38,35,40],[59,39,35,41,"onfinally"],[59,48,35,50],[59,49,35,51],[60,4,36,4],[61,4,37,4,"getPromise"],[61,14,37,14,"getPromise"],[61,15,37,14],[61,17,37,17],[62,6,38,8],[62,10,38,12],[62,11,38,13],[62,15,38,17],[62,16,38,18,"promise"],[62,23,38,25],[62,25,38,27],[63,8,39,12],[63,12,39,16],[63,13,39,17,"promise"],[63,20,39,24],[63,23,39,27],[63,27,39,31],[63,28,39,32,"execute"],[63,35,39,39],[63,36,39,40],[63,37,39,41],[64,6,40,8],[65,6,41,8],[65,13,41,15],[65,17,41,19],[65,18,41,20,"promise"],[65,25,41,27],[66,4,42,4],[67,4,43,4,"execute"],[67,11,43,11,"execute"],[67,12,43,11],[67,14,43,14],[68,6,44,8],[68,13,44,15,"__awaiter"],[68,22,44,24],[68,23,44,25],[68,27,44,29],[68,29,44,31],[68,34,44,36],[68,35,44,37],[68,37,44,39],[68,42,44,44],[68,43,44,45],[68,45,44,47],[68,58,44,60],[69,8,45,12],[69,12,45,16],[70,10,46,16],[70,16,46,22,"result"],[70,22,46,28],[70,25,46,31],[70,31,46,37],[70,35,46,41],[70,36,46,42,"downloadFn"],[70,46,46,52],[70,47,46,53],[70,48,46,54],[71,10,47,16],[71,17,47,23],[72,12,48,20,"data"],[72,16,48,24],[72,18,48,26],[72,24,48,32,"result"],[72,30,48,38],[72,31,48,39,"blob"],[72,35,48,43],[72,36,48,44],[72,37,48,45],[73,12,49,20,"error"],[73,17,49,25],[73,19,49,27],[74,10,50,16],[74,11,50,17],[75,8,51,12],[75,9,51,13],[75,10,52,12],[75,17,52,19,"error"],[75,22,52,24],[75,24,52,26],[76,10,53,16],[76,14,53,20],[76,18,53,24],[76,19,53,25,"shouldThrowOnError"],[76,37,53,43],[76,39,53,45],[77,12,54,20],[77,18,54,26,"error"],[77,23,54,31],[78,10,55,16],[79,10,56,16],[79,14,56,20],[79,15,56,21],[79,16,56,22],[79,18,56,24,"errors_1"],[79,26,56,32],[79,27,56,33,"isStorageError"],[79,41,56,47],[79,43,56,49,"error"],[79,48,56,54],[79,49,56,55],[79,51,56,57],[80,12,57,20],[80,19,57,27],[81,14,57,29,"data"],[81,18,57,33],[81,20,57,35],[81,24,57,39],[82,14,57,41,"error"],[83,12,57,47],[83,13,57,48],[84,10,58,16],[85,10,59,16],[85,16,59,22,"error"],[85,21,59,27],[86,8,60,12],[87,6,61,8],[87,7,61,9],[87,8,61,10],[88,4,62,4],[89,2,63,0],[90,2,64,0,"_a"],[90,4,64,2],[90,7,64,5,"Symbol"],[90,13,64,11],[90,14,64,12,"toStringTag"],[90,25,64,23],[91,2,65,0,"exports"],[91,9,65,7],[91,10,65,8,"default"],[91,17,65,15],[91,20,65,18,"BlobDownloadBuilder"],[91,39,65,37],[92,0,65,38],[92,3]],"functionMap":{"names":["<global>","<anonymous>","adopt","P$argument_0","fulfilled","rejected","step","BlobDownloadBuilder","constructor","asStream","then","_catch","_finally","getPromise","execute","__awaiter$argument_3"],"mappings":"AAA;4CCC;ICC,kEC,sCD,ID;QGE,2FH;QIC,8FJ;QKC,8GL;CDG;wDCC;CDE;AOK;ICC;KDK;IEC;KFE;IGC;KHE;IIC;KJE;IKC;KLE;IMC;KNK;IOC;+CCC;SDiB;KPC;CPC"},"hasCjsExports":true},"type":"js/module"}]}