{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"WebSocketFactory\", {\n    enumerable: true,\n    get: function () {\n      return WebSocketFactory;\n    }\n  });\n  class WebSocketFactory {\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      if (typeof process !== 'undefined') {\n        // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n        const processVersions = process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  var _default = WebSocketFactory;\n});","lineCount":116,"map":[[7,2,91,0,"Object"],[7,8,91,0],[7,9,91,0,"defineProperty"],[7,23,91,0],[7,24,91,0,"exports"],[7,31,91,0],[8,4,91,0,"enumerable"],[8,14,91,0],[9,4,91,0,"get"],[9,7,91,0],[9,18,91,0,"get"],[9,19,91,0],[10,6,91,0],[10,13,91,0,"_default"],[10,21,91,0],[11,4,91,0],[12,2,91,0],[13,2,1,0,"Object"],[13,8,1,0],[13,9,1,0,"defineProperty"],[13,23,1,0],[13,24,1,0,"exports"],[13,31,1,0],[14,4,1,0,"enumerable"],[14,14,1,0],[15,4,1,0,"get"],[15,7,1,0],[15,18,1,0,"get"],[15,19,1,0],[16,6,1,0],[16,13,1,0,"WebSocketFactory"],[16,29,1,0],[17,4,1,0],[18,2,1,0],[19,2,1,7],[19,8,1,13,"WebSocketFactory"],[19,24,1,29],[19,25,1,30],[20,4,2,4],[20,11,2,11,"detectEnvironment"],[20,28,2,28,"detectEnvironment"],[20,29,2,28],[20,31,2,31],[21,6,3,8],[21,10,3,12,"_a"],[21,12,3,14],[22,6,4,8],[22,10,4,12],[22,17,4,19,"WebSocket"],[22,26,4,28],[22,31,4,33],[22,42,4,44],[22,44,4,46],[23,8,5,12],[23,15,5,19],[24,10,5,21,"type"],[24,14,5,25],[24,16,5,27],[24,24,5,35],[25,10,5,37,"constructor"],[25,21,5,48],[25,23,5,50,"WebSocket"],[26,8,5,60],[26,9,5,61],[27,6,6,8],[28,6,7,8],[28,10,7,12],[28,17,7,19,"globalThis"],[28,27,7,29],[28,32,7,34],[28,43,7,45],[28,47,7,49],[28,54,7,56,"globalThis"],[28,64,7,66],[28,65,7,67,"WebSocket"],[28,74,7,76],[28,79,7,81],[28,90,7,92],[28,92,7,94],[29,8,8,12],[29,15,8,19],[30,10,8,21,"type"],[30,14,8,25],[30,16,8,27],[30,24,8,35],[31,10,8,37,"constructor"],[31,21,8,48],[31,23,8,50,"globalThis"],[31,33,8,60],[31,34,8,61,"WebSocket"],[32,8,8,71],[32,9,8,72],[33,6,9,8],[34,6,10,8],[34,10,10,12],[34,17,10,19,"global"],[34,23,10,25],[34,28,10,30],[34,39,10,41],[34,43,10,45],[34,50,10,52,"global"],[34,56,10,58],[34,57,10,59,"WebSocket"],[34,66,10,68],[34,71,10,73],[34,82,10,84],[34,84,10,86],[35,8,11,12],[35,15,11,19],[36,10,11,21,"type"],[36,14,11,25],[36,16,11,27],[36,24,11,35],[37,10,11,37,"constructor"],[37,21,11,48],[37,23,11,50,"global"],[37,29,11,56],[37,30,11,57,"WebSocket"],[38,8,11,67],[38,9,11,68],[39,6,12,8],[40,6,13,8],[40,10,13,12],[40,17,13,19,"globalThis"],[40,27,13,29],[40,32,13,34],[40,43,13,45],[40,47,14,12],[40,54,14,19,"globalThis"],[40,64,14,29],[40,65,14,30,"WebSocketPair"],[40,78,14,43],[40,83,14,48],[40,94,14,59],[40,98,15,12],[40,105,15,19,"globalThis"],[40,115,15,29],[40,116,15,30,"WebSocket"],[40,125,15,39],[40,130,15,44],[40,141,15,55],[40,143,15,57],[41,8,16,12],[41,15,16,19],[42,10,17,16,"type"],[42,14,17,20],[42,16,17,22],[42,28,17,34],[43,10,18,16,"error"],[43,15,18,21],[43,17,18,23],[43,106,18,112],[44,10,19,16,"workaround"],[44,20,19,26],[44,22,19,28],[45,8,20,12],[45,9,20,13],[46,6,21,8],[47,6,22,8],[47,10,22,13],[47,17,22,20,"globalThis"],[47,27,22,30],[47,32,22,35],[47,43,22,46],[47,47,22,50,"globalThis"],[47,57,22,60],[47,58,22,61,"EdgeRuntime"],[47,69,22,72],[47,73,23,13],[47,80,23,20,"navigator"],[47,89,23,29],[47,94,23,34],[47,105,23,45],[47,110,23,50],[47,111,23,51,"_a"],[47,113,23,53],[47,116,23,56,"navigator"],[47,125,23,65],[47,126,23,66,"userAgent"],[47,135,23,75],[47,141,23,81],[47,145,23,85],[47,149,23,89,"_a"],[47,151,23,91],[47,156,23,96],[47,161,23,101],[47,162,23,102],[47,165,23,105],[47,170,23,110],[47,171,23,111],[47,174,23,114,"_a"],[47,176,23,116],[47,177,23,117,"includes"],[47,185,23,125],[47,186,23,126],[47,199,23,139],[47,200,23,140],[47,201,23,142],[47,203,23,144],[48,8,24,12],[48,15,24,19],[49,10,25,16,"type"],[49,14,25,20],[49,16,25,22],[49,29,25,35],[50,10,26,16,"error"],[50,15,26,21],[50,17,26,23],[50,116,26,122],[51,10,27,16,"workaround"],[51,20,27,26],[51,22,27,28],[52,8,28,12],[52,9,28,13],[53,6,29,8],[54,6,30,8],[54,10,30,12],[54,17,30,19,"process"],[54,24,30,26],[54,29,30,31],[54,40,30,42],[54,42,30,44],[55,8,31,12],[56,8,32,12],[56,14,32,18,"processVersions"],[56,29,32,33],[56,32,32,36,"process"],[56,39,32,43],[56,40,32,44],[56,50,32,54],[56,51,32,55],[57,8,33,12],[57,12,33,16,"processVersions"],[57,27,33,31],[57,31,33,35,"processVersions"],[57,46,33,50],[57,47,33,51],[57,53,33,57],[57,54,33,58],[57,56,33,60],[58,10,34,16],[59,10,35,16],[59,16,35,22,"versionString"],[59,29,35,35],[59,32,35,38,"processVersions"],[59,47,35,53],[59,48,35,54],[59,54,35,60],[59,55,35,61],[60,10,36,16],[60,16,36,22,"nodeVersion"],[60,27,36,33],[60,30,36,36,"parseInt"],[60,38,36,44],[60,39,36,45,"versionString"],[60,52,36,58],[60,53,36,59,"replace"],[60,60,36,66],[60,61,36,67],[60,65,36,71],[60,67,36,73],[60,69,36,75],[60,70,36,76],[60,71,36,77,"split"],[60,76,36,82],[60,77,36,83],[60,80,36,86],[60,81,36,87],[60,82,36,88],[60,83,36,89],[60,84,36,90],[60,85,36,91],[61,10,37,16],[62,10,38,16],[62,14,38,20,"nodeVersion"],[62,25,38,31],[62,29,38,35],[62,31,38,37],[62,33,38,39],[63,12,39,20],[64,12,40,20],[64,16,40,24],[64,23,40,31,"globalThis"],[64,33,40,41],[64,34,40,42,"WebSocket"],[64,43,40,51],[64,48,40,56],[64,59,40,67],[64,61,40,69],[65,14,41,24],[65,21,41,31],[66,16,41,33,"type"],[66,20,41,37],[66,22,41,39],[66,30,41,47],[67,16,41,49,"constructor"],[67,27,41,60],[67,29,41,62,"globalThis"],[67,39,41,72],[67,40,41,73,"WebSocket"],[68,14,41,83],[68,15,41,84],[69,12,42,20],[70,12,43,20],[71,12,44,20],[71,19,44,27],[72,14,45,24,"type"],[72,18,45,28],[72,20,45,30],[72,33,45,43],[73,14,46,24,"error"],[73,19,46,29],[73,21,46,31],[73,32,46,42,"nodeVersion"],[73,43,46,53],[73,86,46,96],[74,14,47,24,"workaround"],[74,24,47,34],[74,26,47,36],[75,12,48,20],[75,13,48,21],[76,10,49,16],[77,10,50,16],[78,10,51,16],[78,17,51,23],[79,12,52,20,"type"],[79,16,52,24],[79,18,52,26],[79,31,52,39],[80,12,53,20,"error"],[80,17,53,25],[80,19,53,27],[80,30,53,38,"nodeVersion"],[80,41,53,49],[80,86,53,94],[81,12,54,20,"workaround"],[81,22,54,30],[81,24,54,32],[81,107,54,115],[81,110,55,24],[81,133,55,47],[81,136,56,24],[82,10,57,16],[82,11,57,17],[83,8,58,12],[84,6,59,8],[85,6,60,8],[85,13,60,15],[86,8,61,12,"type"],[86,12,61,16],[86,14,61,18],[86,27,61,31],[87,8,62,12,"error"],[87,13,62,17],[87,15,62,19],[87,70,62,74],[88,8,63,12,"workaround"],[88,18,63,22],[88,20,63,24],[89,6,64,8],[89,7,64,9],[90,4,65,4],[91,4,66,4],[91,11,66,11,"getWebSocketConstructor"],[91,34,66,34,"getWebSocketConstructor"],[91,35,66,34],[91,37,66,37],[92,6,67,8],[92,12,67,14,"env"],[92,15,67,17],[92,18,67,20],[92,22,67,24],[92,23,67,25,"detectEnvironment"],[92,40,67,42],[92,41,67,43],[92,42,67,44],[93,6,68,8],[93,10,68,12,"env"],[93,13,68,15],[93,14,68,16,"constructor"],[93,25,68,27],[93,27,68,29],[94,8,69,12],[94,15,69,19,"env"],[94,18,69,22],[94,19,69,23,"constructor"],[94,30,69,34],[95,6,70,8],[96,6,71,8],[96,10,71,12,"errorMessage"],[96,22,71,24],[96,25,71,27,"env"],[96,28,71,30],[96,29,71,31,"error"],[96,34,71,36],[96,38,71,40],[96,84,71,86],[97,6,72,8],[97,10,72,12,"env"],[97,13,72,15],[97,14,72,16,"workaround"],[97,24,72,26],[97,26,72,28],[98,8,73,12,"errorMessage"],[98,20,73,24],[98,24,73,28],[98,51,73,55,"env"],[98,54,73,58],[98,55,73,59,"workaround"],[98,65,73,69],[98,67,73,71],[99,6,74,8],[100,6,75,8],[100,12,75,14],[100,16,75,18,"Error"],[100,21,75,23],[100,22,75,24,"errorMessage"],[100,34,75,36],[100,35,75,37],[101,4,76,4],[102,4,77,4],[102,11,77,11,"createWebSocket"],[102,26,77,26,"createWebSocket"],[102,27,77,27,"url"],[102,30,77,30],[102,32,77,32,"protocols"],[102,41,77,41],[102,43,77,43],[103,6,78,8],[103,12,78,14,"WS"],[103,14,78,16],[103,17,78,19],[103,21,78,23],[103,22,78,24,"getWebSocketConstructor"],[103,45,78,47],[103,46,78,48],[103,47,78,49],[104,6,79,8],[104,13,79,15],[104,17,79,19,"WS"],[104,19,79,21],[104,20,79,22,"url"],[104,23,79,25],[104,25,79,27,"protocols"],[104,34,79,36],[104,35,79,37],[105,4,80,4],[106,4,81,4],[106,11,81,11,"isWebSocketSupported"],[106,31,81,31,"isWebSocketSupported"],[106,32,81,31],[106,34,81,34],[107,6,82,8],[107,10,82,12],[108,8,83,12],[108,14,83,18,"env"],[108,17,83,21],[108,20,83,24],[108,24,83,28],[108,25,83,29,"detectEnvironment"],[108,42,83,46],[108,43,83,47],[108,44,83,48],[109,8,84,12],[109,15,84,19,"env"],[109,18,84,22],[109,19,84,23,"type"],[109,23,84,27],[109,28,84,32],[109,36,84,40],[109,40,84,44,"env"],[109,43,84,47],[109,44,84,48,"type"],[109,48,84,52],[109,53,84,57],[109,57,84,61],[110,6,85,8],[110,7,85,9],[110,8,86,8],[110,15,86,15,"_a"],[110,17,86,17],[110,19,86,19],[111,8,87,12],[111,15,87,19],[111,20,87,24],[112,6,88,8],[113,4,89,4],[114,2,90,0],[115,2,91,0],[115,6,91,0,"_default"],[115,14,91,0],[115,17,91,15,"WebSocketFactory"],[115,33,91,31],[116,0,91,32],[116,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA,OC;ICC;KD+D;IEC;KFU;IGC;KHG;IIC;KJQ;CDC"},"hasCjsExports":false},"type":"js/module"}]}