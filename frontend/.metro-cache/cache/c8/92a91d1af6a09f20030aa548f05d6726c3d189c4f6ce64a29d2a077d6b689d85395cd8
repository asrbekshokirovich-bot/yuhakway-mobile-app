{"dependencies":[{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":689},"end":{"line":11,"column":47,"index":736}}],"key":"tudpaQjH3OjVUtpmjZhVLT9U2eg=","exportNames":["*"],"imports":1}},{"name":"./StreamDownloadBuilder","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":737},"end":{"line":12,"column":60,"index":797}}],"key":"8Ubul3M21knXuSFidv57RlVYJmI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _libErrors = require(_dependencyMap[0], \"../lib/errors\");\n  var _StreamDownloadBuilder = require(_dependencyMap[1], \"./StreamDownloadBuilder\");\n  var StreamDownloadBuilder = _interopDefault(_StreamDownloadBuilder);\n  var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  var _a;\n  class BlobDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n      this[_a] = 'BlobDownloadBuilder';\n      this.promise = null;\n    }\n    asStream() {\n      return new StreamDownloadBuilder.default(this.downloadFn, this.shouldThrowOnError);\n    }\n    then(onfulfilled, onrejected) {\n      return this.getPromise().then(onfulfilled, onrejected);\n    }\n    catch(onrejected) {\n      return this.getPromise().catch(onrejected);\n    }\n    finally(onfinally) {\n      return this.getPromise().finally(onfinally);\n    }\n    getPromise() {\n      if (!this.promise) {\n        this.promise = this.execute();\n      }\n      return this.promise;\n    }\n    execute() {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: yield result.blob(),\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, _libErrors.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  _a = Symbol.toStringTag;\n  var _default = BlobDownloadBuilder;\n});","lineCount":99,"map":[[12,2,60,0,"Object"],[12,8,60,0],[12,9,60,0,"defineProperty"],[12,23,60,0],[12,24,60,0,"exports"],[12,31,60,0],[13,4,60,0,"enumerable"],[13,14,60,0],[14,4,60,0,"get"],[14,7,60,0],[14,18,60,0,"get"],[14,19,60,0],[15,6,60,0],[15,13,60,0,"_default"],[15,21,60,0],[16,4,60,0],[17,2,60,0],[18,2,11,0],[18,6,11,0,"_libErrors"],[18,16,11,0],[18,19,11,0,"require"],[18,26,11,0],[18,27,11,0,"_dependencyMap"],[18,41,11,0],[19,2,12,0],[19,6,12,0,"_StreamDownloadBuilder"],[19,28,12,0],[19,31,12,0,"require"],[19,38,12,0],[19,39,12,0,"_dependencyMap"],[19,53,12,0],[20,2,12,0],[20,6,12,0,"StreamDownloadBuilder"],[20,27,12,0],[20,30,12,0,"_interopDefault"],[20,45,12,0],[20,46,12,0,"_StreamDownloadBuilder"],[20,68,12,0],[21,2,1,0],[21,6,1,4,"__awaiter"],[21,15,1,13],[21,18,1,17],[21,22,1,21],[21,26,1,25],[21,30,1,29],[21,31,1,30,"__awaiter"],[21,40,1,39],[21,44,1,44],[21,54,1,54,"thisArg"],[21,61,1,61],[21,63,1,63,"_arguments"],[21,73,1,73],[21,75,1,75,"P"],[21,76,1,76],[21,78,1,78,"generator"],[21,87,1,87],[21,89,1,89],[22,4,2,4],[22,13,2,13,"adopt"],[22,18,2,18,"adopt"],[22,19,2,19,"value"],[22,24,2,24],[22,26,2,26],[23,6,2,28],[23,13,2,35,"value"],[23,18,2,40],[23,30,2,52,"P"],[23,31,2,53],[23,34,2,56,"value"],[23,39,2,61],[23,42,2,64],[23,46,2,68,"P"],[23,47,2,69],[23,48,2,70],[23,58,2,80,"resolve"],[23,65,2,87],[23,67,2,89],[24,8,2,91,"resolve"],[24,15,2,98],[24,16,2,99,"value"],[24,21,2,104],[24,22,2,105],[25,6,2,107],[25,7,2,108],[25,8,2,109],[26,4,2,111],[27,4,3,4],[27,11,3,11],[27,16,3,16,"P"],[27,17,3,17],[27,22,3,22,"P"],[27,23,3,23],[27,26,3,26,"Promise"],[27,33,3,33],[27,34,3,34],[27,36,3,36],[27,46,3,46,"resolve"],[27,53,3,53],[27,55,3,55,"reject"],[27,61,3,61],[27,63,3,63],[28,6,4,8],[28,15,4,17,"fulfilled"],[28,24,4,26,"fulfilled"],[28,25,4,27,"value"],[28,30,4,32],[28,32,4,34],[29,8,4,36],[29,12,4,40],[30,10,4,42,"step"],[30,14,4,46],[30,15,4,47,"generator"],[30,24,4,56],[30,25,4,57,"next"],[30,29,4,61],[30,30,4,62,"value"],[30,35,4,67],[30,36,4,68],[30,37,4,69],[31,8,4,71],[31,9,4,72],[31,10,4,73],[31,17,4,80,"e"],[31,18,4,81],[31,20,4,83],[32,10,4,85,"reject"],[32,16,4,91],[32,17,4,92,"e"],[32,18,4,93],[32,19,4,94],[33,8,4,96],[34,6,4,98],[35,6,5,8],[35,15,5,17,"rejected"],[35,23,5,25,"rejected"],[35,24,5,26,"value"],[35,29,5,31],[35,31,5,33],[36,8,5,35],[36,12,5,39],[37,10,5,41,"step"],[37,14,5,45],[37,15,5,46,"generator"],[37,24,5,55],[37,25,5,56],[37,32,5,63],[37,33,5,64],[37,34,5,65,"value"],[37,39,5,70],[37,40,5,71],[37,41,5,72],[38,8,5,74],[38,9,5,75],[38,10,5,76],[38,17,5,83,"e"],[38,18,5,84],[38,20,5,86],[39,10,5,88,"reject"],[39,16,5,94],[39,17,5,95,"e"],[39,18,5,96],[39,19,5,97],[40,8,5,99],[41,6,5,101],[42,6,6,8],[42,15,6,17,"step"],[42,19,6,21,"step"],[42,20,6,22,"result"],[42,26,6,28],[42,28,6,30],[43,8,6,32,"result"],[43,14,6,38],[43,15,6,39,"done"],[43,19,6,43],[43,22,6,46,"resolve"],[43,29,6,53],[43,30,6,54,"result"],[43,36,6,60],[43,37,6,61,"value"],[43,42,6,66],[43,43,6,67],[43,46,6,70,"adopt"],[43,51,6,75],[43,52,6,76,"result"],[43,58,6,82],[43,59,6,83,"value"],[43,64,6,88],[43,65,6,89],[43,66,6,90,"then"],[43,70,6,94],[43,71,6,95,"fulfilled"],[43,80,6,104],[43,82,6,106,"rejected"],[43,90,6,114],[43,91,6,115],[44,6,6,117],[45,6,7,8,"step"],[45,10,7,12],[45,11,7,13],[45,12,7,14,"generator"],[45,21,7,23],[45,24,7,26,"generator"],[45,33,7,35],[45,34,7,36,"apply"],[45,39,7,41],[45,40,7,42,"thisArg"],[45,47,7,49],[45,49,7,51,"_arguments"],[45,59,7,61],[45,63,7,65],[45,65,7,67],[45,66,7,68],[45,68,7,70,"next"],[45,72,7,74],[45,73,7,75],[45,74,7,76],[45,75,7,77],[46,4,8,4],[46,5,8,5],[46,6,8,6],[47,2,9,0],[47,3,9,1],[48,2,10,0],[48,6,10,4,"_a"],[48,8,10,6],[49,2,13,0],[49,8,13,6,"BlobDownloadBuilder"],[49,27,13,25],[49,28,13,26],[50,4,14,4,"constructor"],[50,15,14,15,"constructor"],[50,16,14,16,"downloadFn"],[50,26,14,26],[50,28,14,28,"shouldThrowOnError"],[50,46,14,46],[50,48,14,48],[51,6,15,8],[51,10,15,12],[51,11,15,13,"downloadFn"],[51,21,15,23],[51,24,15,26,"downloadFn"],[51,34,15,36],[52,6,16,8],[52,10,16,12],[52,11,16,13,"shouldThrowOnError"],[52,29,16,31],[52,32,16,34,"shouldThrowOnError"],[52,50,16,52],[53,6,17,8],[53,10,17,12],[53,11,17,13,"_a"],[53,13,17,15],[53,14,17,16],[53,17,17,19],[53,38,17,40],[54,6,18,8],[54,10,18,12],[54,11,18,13,"promise"],[54,18,18,20],[54,21,18,23],[54,25,18,27],[55,4,19,4],[56,4,20,4,"asStream"],[56,12,20,12,"asStream"],[56,13,20,12],[56,15,20,15],[57,6,21,8],[57,13,21,15],[57,17,21,19,"StreamDownloadBuilder"],[57,38,21,40],[57,39,21,40,"default"],[57,46,21,40],[57,47,21,41],[57,51,21,45],[57,52,21,46,"downloadFn"],[57,62,21,56],[57,64,21,58],[57,68,21,62],[57,69,21,63,"shouldThrowOnError"],[57,87,21,81],[57,88,21,82],[58,4,22,4],[59,4,23,4,"then"],[59,8,23,8,"then"],[59,9,23,9,"onfulfilled"],[59,20,23,20],[59,22,23,22,"onrejected"],[59,32,23,32],[59,34,23,34],[60,6,24,8],[60,13,24,15],[60,17,24,19],[60,18,24,20,"getPromise"],[60,28,24,30],[60,29,24,31],[60,30,24,32],[60,31,24,33,"then"],[60,35,24,37],[60,36,24,38,"onfulfilled"],[60,47,24,49],[60,49,24,51,"onrejected"],[60,59,24,61],[60,60,24,62],[61,4,25,4],[62,4,26,4,"catch"],[62,9,26,9,"catch"],[62,10,26,10,"onrejected"],[62,20,26,20],[62,22,26,22],[63,6,27,8],[63,13,27,15],[63,17,27,19],[63,18,27,20,"getPromise"],[63,28,27,30],[63,29,27,31],[63,30,27,32],[63,31,27,33,"catch"],[63,36,27,38],[63,37,27,39,"onrejected"],[63,47,27,49],[63,48,27,50],[64,4,28,4],[65,4,29,4,"finally"],[65,11,29,11,"finally"],[65,12,29,12,"onfinally"],[65,21,29,21],[65,23,29,23],[66,6,30,8],[66,13,30,15],[66,17,30,19],[66,18,30,20,"getPromise"],[66,28,30,30],[66,29,30,31],[66,30,30,32],[66,31,30,33,"finally"],[66,38,30,40],[66,39,30,41,"onfinally"],[66,48,30,50],[66,49,30,51],[67,4,31,4],[68,4,32,4,"getPromise"],[68,14,32,14,"getPromise"],[68,15,32,14],[68,17,32,17],[69,6,33,8],[69,10,33,12],[69,11,33,13],[69,15,33,17],[69,16,33,18,"promise"],[69,23,33,25],[69,25,33,27],[70,8,34,12],[70,12,34,16],[70,13,34,17,"promise"],[70,20,34,24],[70,23,34,27],[70,27,34,31],[70,28,34,32,"execute"],[70,35,34,39],[70,36,34,40],[70,37,34,41],[71,6,35,8],[72,6,36,8],[72,13,36,15],[72,17,36,19],[72,18,36,20,"promise"],[72,25,36,27],[73,4,37,4],[74,4,38,4,"execute"],[74,11,38,11,"execute"],[74,12,38,11],[74,14,38,14],[75,6,39,8],[75,13,39,15,"__awaiter"],[75,22,39,24],[75,23,39,25],[75,27,39,29],[75,29,39,31],[75,34,39,36],[75,35,39,37],[75,37,39,39],[75,42,39,44],[75,43,39,45],[75,45,39,47],[75,58,39,60],[76,8,40,12],[76,12,40,16],[77,10,41,16],[77,16,41,22,"result"],[77,22,41,28],[77,25,41,31],[77,31,41,37],[77,35,41,41],[77,36,41,42,"downloadFn"],[77,46,41,52],[77,47,41,53],[77,48,41,54],[78,10,42,16],[78,17,42,23],[79,12,43,20,"data"],[79,16,43,24],[79,18,43,26],[79,24,43,32,"result"],[79,30,43,38],[79,31,43,39,"blob"],[79,35,43,43],[79,36,43,44],[79,37,43,45],[80,12,44,20,"error"],[80,17,44,25],[80,19,44,27],[81,10,45,16],[81,11,45,17],[82,8,46,12],[82,9,46,13],[82,10,47,12],[82,17,47,19,"error"],[82,22,47,24],[82,24,47,26],[83,10,48,16],[83,14,48,20],[83,18,48,24],[83,19,48,25,"shouldThrowOnError"],[83,37,48,43],[83,39,48,45],[84,12,49,20],[84,18,49,26,"error"],[84,23,49,31],[85,10,50,16],[86,10,51,16],[86,14,51,20],[86,18,51,20,"isStorageError"],[86,28,51,34],[86,29,51,34,"isStorageError"],[86,43,51,34],[86,45,51,35,"error"],[86,50,51,40],[86,51,51,41],[86,53,51,43],[87,12,52,20],[87,19,52,27],[88,14,52,29,"data"],[88,18,52,33],[88,20,52,35],[88,24,52,39],[89,14,52,41,"error"],[90,12,52,47],[90,13,52,48],[91,10,53,16],[92,10,54,16],[92,16,54,22,"error"],[92,21,54,27],[93,8,55,12],[94,6,56,8],[94,7,56,9],[94,8,56,10],[95,4,57,4],[96,2,58,0],[97,2,59,0,"_a"],[97,4,59,2],[97,7,59,5,"Symbol"],[97,13,59,11],[97,14,59,12,"toStringTag"],[97,25,59,23],[98,2,60,0],[98,6,60,0,"_default"],[98,14,60,0],[98,17,60,15,"BlobDownloadBuilder"],[98,36,60,34],[99,0,60,35],[99,3]],"functionMap":{"names":["<global>","<anonymous>","adopt","P$argument_0","fulfilled","rejected","step","BlobDownloadBuilder","constructor","asStream","then","_catch","_finally","getPromise","execute","__awaiter$argument_3"],"mappings":"AAA,4CC;ICC,kEC,sCD,ID;QGE,2FH;QIC,8FJ;QKC,8GL;CDG;AOI;ICC;KDK;IEC;KFE;IGC;KHE;IIC;KJE;IKC;KLE;IMC;KNK;IOC;+CCC;SDiB;KPC;CPC"},"hasCjsExports":false},"type":"js/module"}]}