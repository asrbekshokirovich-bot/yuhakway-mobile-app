{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = void 0;\n  class WebSocketFactory {\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      if (typeof process !== 'undefined') {\n        // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n        const processVersions = process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":106,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"WebSocketFactory"],[7,26,3,24],[7,29,3,27],[7,34,3,32],[7,35,3,33],[8,2,4,0],[8,8,4,6,"WebSocketFactory"],[8,24,4,22],[8,25,4,23],[9,4,5,4],[9,11,5,11,"detectEnvironment"],[9,28,5,28,"detectEnvironment"],[9,29,5,28],[9,31,5,31],[10,6,6,8],[10,10,6,12,"_a"],[10,12,6,14],[11,6,7,8],[11,10,7,12],[11,17,7,19,"WebSocket"],[11,26,7,28],[11,31,7,33],[11,42,7,44],[11,44,7,46],[12,8,8,12],[12,15,8,19],[13,10,8,21,"type"],[13,14,8,25],[13,16,8,27],[13,24,8,35],[14,10,8,37,"constructor"],[14,21,8,48],[14,23,8,50,"WebSocket"],[15,8,8,60],[15,9,8,61],[16,6,9,8],[17,6,10,8],[17,10,10,12],[17,17,10,19,"globalThis"],[17,27,10,29],[17,32,10,34],[17,43,10,45],[17,47,10,49],[17,54,10,56,"globalThis"],[17,64,10,66],[17,65,10,67,"WebSocket"],[17,74,10,76],[17,79,10,81],[17,90,10,92],[17,92,10,94],[18,8,11,12],[18,15,11,19],[19,10,11,21,"type"],[19,14,11,25],[19,16,11,27],[19,24,11,35],[20,10,11,37,"constructor"],[20,21,11,48],[20,23,11,50,"globalThis"],[20,33,11,60],[20,34,11,61,"WebSocket"],[21,8,11,71],[21,9,11,72],[22,6,12,8],[23,6,13,8],[23,10,13,12],[23,17,13,19,"global"],[23,23,13,25],[23,28,13,30],[23,39,13,41],[23,43,13,45],[23,50,13,52,"global"],[23,56,13,58],[23,57,13,59,"WebSocket"],[23,66,13,68],[23,71,13,73],[23,82,13,84],[23,84,13,86],[24,8,14,12],[24,15,14,19],[25,10,14,21,"type"],[25,14,14,25],[25,16,14,27],[25,24,14,35],[26,10,14,37,"constructor"],[26,21,14,48],[26,23,14,50,"global"],[26,29,14,56],[26,30,14,57,"WebSocket"],[27,8,14,67],[27,9,14,68],[28,6,15,8],[29,6,16,8],[29,10,16,12],[29,17,16,19,"globalThis"],[29,27,16,29],[29,32,16,34],[29,43,16,45],[29,47,17,12],[29,54,17,19,"globalThis"],[29,64,17,29],[29,65,17,30,"WebSocketPair"],[29,78,17,43],[29,83,17,48],[29,94,17,59],[29,98,18,12],[29,105,18,19,"globalThis"],[29,115,18,29],[29,116,18,30,"WebSocket"],[29,125,18,39],[29,130,18,44],[29,141,18,55],[29,143,18,57],[30,8,19,12],[30,15,19,19],[31,10,20,16,"type"],[31,14,20,20],[31,16,20,22],[31,28,20,34],[32,10,21,16,"error"],[32,15,21,21],[32,17,21,23],[32,106,21,112],[33,10,22,16,"workaround"],[33,20,22,26],[33,22,22,28],[34,8,23,12],[34,9,23,13],[35,6,24,8],[36,6,25,8],[36,10,25,13],[36,17,25,20,"globalThis"],[36,27,25,30],[36,32,25,35],[36,43,25,46],[36,47,25,50,"globalThis"],[36,57,25,60],[36,58,25,61,"EdgeRuntime"],[36,69,25,72],[36,73,26,13],[36,80,26,20,"navigator"],[36,89,26,29],[36,94,26,34],[36,105,26,45],[36,110,26,50],[36,111,26,51,"_a"],[36,113,26,53],[36,116,26,56,"navigator"],[36,125,26,65],[36,126,26,66,"userAgent"],[36,135,26,75],[36,141,26,81],[36,145,26,85],[36,149,26,89,"_a"],[36,151,26,91],[36,156,26,96],[36,161,26,101],[36,162,26,102],[36,165,26,105],[36,170,26,110],[36,171,26,111],[36,174,26,114,"_a"],[36,176,26,116],[36,177,26,117,"includes"],[36,185,26,125],[36,186,26,126],[36,199,26,139],[36,200,26,140],[36,201,26,142],[36,203,26,144],[37,8,27,12],[37,15,27,19],[38,10,28,16,"type"],[38,14,28,20],[38,16,28,22],[38,29,28,35],[39,10,29,16,"error"],[39,15,29,21],[39,17,29,23],[39,116,29,122],[40,10,30,16,"workaround"],[40,20,30,26],[40,22,30,28],[41,8,31,12],[41,9,31,13],[42,6,32,8],[43,6,33,8],[43,10,33,12],[43,17,33,19,"process"],[43,24,33,26],[43,29,33,31],[43,40,33,42],[43,42,33,44],[44,8,34,12],[45,8,35,12],[45,14,35,18,"processVersions"],[45,29,35,33],[45,32,35,36,"process"],[45,39,35,43],[45,40,35,44],[45,50,35,54],[45,51,35,55],[46,8,36,12],[46,12,36,16,"processVersions"],[46,27,36,31],[46,31,36,35,"processVersions"],[46,46,36,50],[46,47,36,51],[46,53,36,57],[46,54,36,58],[46,56,36,60],[47,10,37,16],[48,10,38,16],[48,16,38,22,"versionString"],[48,29,38,35],[48,32,38,38,"processVersions"],[48,47,38,53],[48,48,38,54],[48,54,38,60],[48,55,38,61],[49,10,39,16],[49,16,39,22,"nodeVersion"],[49,27,39,33],[49,30,39,36,"parseInt"],[49,38,39,44],[49,39,39,45,"versionString"],[49,52,39,58],[49,53,39,59,"replace"],[49,60,39,66],[49,61,39,67],[49,65,39,71],[49,67,39,73],[49,69,39,75],[49,70,39,76],[49,71,39,77,"split"],[49,76,39,82],[49,77,39,83],[49,80,39,86],[49,81,39,87],[49,82,39,88],[49,83,39,89],[49,84,39,90],[49,85,39,91],[50,10,40,16],[51,10,41,16],[51,14,41,20,"nodeVersion"],[51,25,41,31],[51,29,41,35],[51,31,41,37],[51,33,41,39],[52,12,42,20],[53,12,43,20],[53,16,43,24],[53,23,43,31,"globalThis"],[53,33,43,41],[53,34,43,42,"WebSocket"],[53,43,43,51],[53,48,43,56],[53,59,43,67],[53,61,43,69],[54,14,44,24],[54,21,44,31],[55,16,44,33,"type"],[55,20,44,37],[55,22,44,39],[55,30,44,47],[56,16,44,49,"constructor"],[56,27,44,60],[56,29,44,62,"globalThis"],[56,39,44,72],[56,40,44,73,"WebSocket"],[57,14,44,83],[57,15,44,84],[58,12,45,20],[59,12,46,20],[60,12,47,20],[60,19,47,27],[61,14,48,24,"type"],[61,18,48,28],[61,20,48,30],[61,33,48,43],[62,14,49,24,"error"],[62,19,49,29],[62,21,49,31],[62,32,49,42,"nodeVersion"],[62,43,49,53],[62,86,49,96],[63,14,50,24,"workaround"],[63,24,50,34],[63,26,50,36],[64,12,51,20],[64,13,51,21],[65,10,52,16],[66,10,53,16],[67,10,54,16],[67,17,54,23],[68,12,55,20,"type"],[68,16,55,24],[68,18,55,26],[68,31,55,39],[69,12,56,20,"error"],[69,17,56,25],[69,19,56,27],[69,30,56,38,"nodeVersion"],[69,41,56,49],[69,86,56,94],[70,12,57,20,"workaround"],[70,22,57,30],[70,24,57,32],[70,107,57,115],[70,110,58,24],[70,133,58,47],[70,136,59,24],[71,10,60,16],[71,11,60,17],[72,8,61,12],[73,6,62,8],[74,6,63,8],[74,13,63,15],[75,8,64,12,"type"],[75,12,64,16],[75,14,64,18],[75,27,64,31],[76,8,65,12,"error"],[76,13,65,17],[76,15,65,19],[76,70,65,74],[77,8,66,12,"workaround"],[77,18,66,22],[77,20,66,24],[78,6,67,8],[78,7,67,9],[79,4,68,4],[80,4,69,4],[80,11,69,11,"getWebSocketConstructor"],[80,34,69,34,"getWebSocketConstructor"],[80,35,69,34],[80,37,69,37],[81,6,70,8],[81,12,70,14,"env"],[81,15,70,17],[81,18,70,20],[81,22,70,24],[81,23,70,25,"detectEnvironment"],[81,40,70,42],[81,41,70,43],[81,42,70,44],[82,6,71,8],[82,10,71,12,"env"],[82,13,71,15],[82,14,71,16,"constructor"],[82,25,71,27],[82,27,71,29],[83,8,72,12],[83,15,72,19,"env"],[83,18,72,22],[83,19,72,23,"constructor"],[83,30,72,34],[84,6,73,8],[85,6,74,8],[85,10,74,12,"errorMessage"],[85,22,74,24],[85,25,74,27,"env"],[85,28,74,30],[85,29,74,31,"error"],[85,34,74,36],[85,38,74,40],[85,84,74,86],[86,6,75,8],[86,10,75,12,"env"],[86,13,75,15],[86,14,75,16,"workaround"],[86,24,75,26],[86,26,75,28],[87,8,76,12,"errorMessage"],[87,20,76,24],[87,24,76,28],[87,51,76,55,"env"],[87,54,76,58],[87,55,76,59,"workaround"],[87,65,76,69],[87,67,76,71],[88,6,77,8],[89,6,78,8],[89,12,78,14],[89,16,78,18,"Error"],[89,21,78,23],[89,22,78,24,"errorMessage"],[89,34,78,36],[89,35,78,37],[90,4,79,4],[91,4,80,4],[91,11,80,11,"createWebSocket"],[91,26,80,26,"createWebSocket"],[91,27,80,27,"url"],[91,30,80,30],[91,32,80,32,"protocols"],[91,41,80,41],[91,43,80,43],[92,6,81,8],[92,12,81,14,"WS"],[92,14,81,16],[92,17,81,19],[92,21,81,23],[92,22,81,24,"getWebSocketConstructor"],[92,45,81,47],[92,46,81,48],[92,47,81,49],[93,6,82,8],[93,13,82,15],[93,17,82,19,"WS"],[93,19,82,21],[93,20,82,22,"url"],[93,23,82,25],[93,25,82,27,"protocols"],[93,34,82,36],[93,35,82,37],[94,4,83,4],[95,4,84,4],[95,11,84,11,"isWebSocketSupported"],[95,31,84,31,"isWebSocketSupported"],[95,32,84,31],[95,34,84,34],[96,6,85,8],[96,10,85,12],[97,8,86,12],[97,14,86,18,"env"],[97,17,86,21],[97,20,86,24],[97,24,86,28],[97,25,86,29,"detectEnvironment"],[97,42,86,46],[97,43,86,47],[97,44,86,48],[98,8,87,12],[98,15,87,19,"env"],[98,18,87,22],[98,19,87,23,"type"],[98,23,87,27],[98,28,87,32],[98,36,87,40],[98,40,87,44,"env"],[98,43,87,47],[98,44,87,48,"type"],[98,48,87,52],[98,53,87,57],[98,57,87,61],[99,6,88,8],[99,7,88,9],[99,8,89,8],[99,15,89,15,"_a"],[99,17,89,17],[99,19,89,19],[100,8,90,12],[100,15,90,19],[100,20,90,24],[101,6,91,8],[102,4,92,4],[103,2,93,0],[104,2,94,0,"exports"],[104,9,94,7],[104,10,94,8,"WebSocketFactory"],[104,26,94,24],[104,29,94,27,"WebSocketFactory"],[104,45,94,43],[105,2,95,0,"exports"],[105,9,95,7],[105,10,95,8,"default"],[105,17,95,15],[105,20,95,18,"WebSocketFactory"],[105,36,95,34],[106,0,95,35],[106,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACG;ICC;KD+D;IEC;KFU;IGC;KHG;IIC;KJQ;CDC"},"hasCjsExports":true},"type":"js/module"}]}