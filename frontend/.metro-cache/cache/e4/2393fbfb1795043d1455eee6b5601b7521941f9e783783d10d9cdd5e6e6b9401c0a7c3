{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":134},"end":{"line":3,"column":43,"index":177}}],"key":"phU7YuntQKgoAYKWKHVlsIL7LCY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _libSupabase = require(_dependencyMap[1], \"../lib/supabase\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [session, setSession] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      // Get initial session\n      _libSupabase.supabase.auth.getSession().then(({\n        data: {\n          session\n        }\n      }) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        setLoading(false);\n      });\n\n      // Listen for auth changes\n      const {\n        data: {\n          subscription\n        }\n      } = _libSupabase.supabase.auth.onAuthStateChange((_event, session) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n      });\n      return () => subscription.unsubscribe();\n    }, []);\n    const signIn = async (email, password) => {\n      const {\n        error\n      } = await _libSupabase.supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      if (error) throw error;\n    };\n    const signUp = async (email, password, fullName) => {\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.auth.signUp({\n          email,\n          password,\n          options: {\n            data: {\n              full_name: fullName\n            },\n            emailRedirectTo: undefined\n          }\n        });\n        console.log('Signup response:', {\n          data,\n          error\n        });\n        if (error) throw error;\n\n        // Check if session exists (auto-confirmed) or if confirmation is needed\n        if (data.session) {\n          console.log('Session created immediately, user auto-confirmed');\n          setSession(data.session);\n          setUser(data.user);\n        } else if (data.user && !data.session) {\n          // User created but needs confirmation\n          console.log('User created, but confirmation may be required');\n          // Try to sign in immediately\n          const {\n            data: signInData,\n            error: signInError\n          } = await _libSupabase.supabase.auth.signInWithPassword({\n            email,\n            password\n          });\n          if (signInError) {\n            console.error('Auto sign-in error:', signInError);\n            throw new Error('Account created but auto-login failed. Please try logging in manually.');\n          }\n          if (signInData.session) {\n            setSession(signInData.session);\n            setUser(signInData.user);\n          }\n        }\n      } catch (error) {\n        console.error('Signup error:', error);\n        throw error;\n      }\n    };\n    const signOut = async () => {\n      const {\n        error\n      } = await _libSupabase.supabase.auth.signOut();\n      if (error) throw error;\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        session,\n        user,\n        loading,\n        signIn,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":142,"map":[[8,2,16,0,"Object"],[8,8,16,0],[8,9,16,0,"defineProperty"],[8,23,16,0],[8,24,16,0,"exports"],[8,31,16,0],[9,4,16,0,"enumerable"],[9,14,16,0],[10,4,16,0,"get"],[10,7,16,0],[10,18,16,0,"get"],[10,19,16,0],[11,6,16,0],[11,13,16,0,"AuthProvider"],[11,25,16,0],[12,4,16,0],[13,2,16,0],[14,2,102,0,"Object"],[14,8,102,0],[14,9,102,0,"defineProperty"],[14,23,102,0],[14,24,102,0,"exports"],[14,31,102,0],[15,4,102,0,"enumerable"],[15,14,102,0],[16,4,102,0,"get"],[16,7,102,0],[16,18,102,0,"get"],[16,19,102,0],[17,6,102,0],[17,13,102,0,"useAuth"],[17,20,102,0],[18,4,102,0],[19,2,102,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,3,0],[21,6,3,0,"_libSupabase"],[21,18,3,0],[21,21,3,0,"require"],[21,28,3,0],[21,29,3,0,"_dependencyMap"],[21,43,3,0],[22,2,3,43],[22,6,3,43,"_reactJsxDevRuntime"],[22,25,3,43],[22,28,3,43,"require"],[22,35,3,43],[22,36,3,43,"_dependencyMap"],[22,50,3,43],[23,2,14,0],[23,8,14,6,"AuthContext"],[23,19,14,17],[23,35,14,20],[23,39,14,20,"createContext"],[23,45,14,33],[23,46,14,33,"createContext"],[23,59,14,33],[23,61,14,63,"undefined"],[23,70,14,72],[23,71,14,73],[24,2,16,7],[24,8,16,13,"AuthProvider"],[24,20,16,66],[24,23,16,69,"AuthProvider"],[24,24,16,70],[25,4,16,72,"children"],[26,2,16,81],[26,3,16,82],[26,8,16,87],[27,4,17,2],[27,10,17,8],[27,11,17,9,"session"],[27,18,17,16],[27,20,17,18,"setSession"],[27,30,17,28],[27,31,17,29],[27,34,17,32],[27,38,17,32,"useState"],[27,44,17,40],[27,45,17,40,"useState"],[27,53,17,40],[27,55,17,57],[27,59,17,61],[27,60,17,62],[28,4,18,2],[28,10,18,8],[28,11,18,9,"user"],[28,15,18,13],[28,17,18,15,"setUser"],[28,24,18,22],[28,25,18,23],[28,28,18,26],[28,32,18,26,"useState"],[28,38,18,34],[28,39,18,34,"useState"],[28,47,18,34],[28,49,18,48],[28,53,18,52],[28,54,18,53],[29,4,19,2],[29,10,19,8],[29,11,19,9,"loading"],[29,18,19,16],[29,20,19,18,"setLoading"],[29,30,19,28],[29,31,19,29],[29,34,19,32],[29,38,19,32,"useState"],[29,44,19,40],[29,45,19,40,"useState"],[29,53,19,40],[29,55,19,41],[29,59,19,45],[29,60,19,46],[30,4,21,2],[30,8,21,2,"useEffect"],[30,14,21,11],[30,15,21,11,"useEffect"],[30,24,21,11],[30,26,21,12],[30,32,21,18],[31,6,22,4],[32,6,23,4,"supabase"],[32,18,23,12],[32,19,23,12,"supabase"],[32,27,23,12],[32,28,23,13,"auth"],[32,32,23,17],[32,33,23,18,"getSession"],[32,43,23,28],[32,44,23,29],[32,45,23,30],[32,46,23,31,"then"],[32,50,23,35],[32,51,23,36],[32,52,23,37],[33,8,23,39,"data"],[33,12,23,43],[33,14,23,45],[34,10,23,47,"session"],[35,8,23,55],[36,6,23,57],[36,7,23,58],[36,12,23,63],[37,8,24,6,"setSession"],[37,18,24,16],[37,19,24,17,"session"],[37,26,24,24],[37,27,24,25],[38,8,25,6,"setUser"],[38,15,25,13],[38,16,25,14,"session"],[38,23,25,21],[38,25,25,23,"user"],[38,29,25,27],[38,33,25,31],[38,37,25,35],[38,38,25,36],[39,8,26,6,"setLoading"],[39,18,26,16],[39,19,26,17],[39,24,26,22],[39,25,26,23],[40,6,27,4],[40,7,27,5],[40,8,27,6],[42,6,29,4],[43,6,30,4],[43,12,30,10],[44,8,30,12,"data"],[44,12,30,16],[44,14,30,18],[45,10,30,20,"subscription"],[46,8,30,33],[47,6,30,35],[47,7,30,36],[47,10,30,39,"supabase"],[47,22,30,47],[47,23,30,47,"supabase"],[47,31,30,47],[47,32,30,48,"auth"],[47,36,30,52],[47,37,30,53,"onAuthStateChange"],[47,54,30,70],[47,55,30,71],[47,56,30,72,"_event"],[47,62,30,78],[47,64,30,80,"session"],[47,71,30,87],[47,76,30,92],[48,8,31,6,"setSession"],[48,18,31,16],[48,19,31,17,"session"],[48,26,31,24],[48,27,31,25],[49,8,32,6,"setUser"],[49,15,32,13],[49,16,32,14,"session"],[49,23,32,21],[49,25,32,23,"user"],[49,29,32,27],[49,33,32,31],[49,37,32,35],[49,38,32,36],[50,6,33,4],[50,7,33,5],[50,8,33,6],[51,6,35,4],[51,13,35,11],[51,19,35,17,"subscription"],[51,31,35,29],[51,32,35,30,"unsubscribe"],[51,43,35,41],[51,44,35,42],[51,45,35,43],[52,4,36,2],[52,5,36,3],[52,7,36,5],[52,9,36,7],[52,10,36,8],[53,4,38,2],[53,10,38,8,"signIn"],[53,16,38,14],[53,19,38,17],[53,25,38,17,"signIn"],[53,26,38,24,"email"],[53,31,38,37],[53,33,38,39,"password"],[53,41,38,55],[53,46,38,60],[54,6,39,4],[54,12,39,10],[55,8,39,12,"error"],[56,6,39,18],[56,7,39,19],[56,10,39,22],[56,16,39,28,"supabase"],[56,28,39,36],[56,29,39,36,"supabase"],[56,37,39,36],[56,38,39,37,"auth"],[56,42,39,41],[56,43,39,42,"signInWithPassword"],[56,61,39,60],[56,62,39,61],[57,8,39,63,"email"],[57,13,39,68],[58,8,39,70,"password"],[59,6,39,79],[59,7,39,80],[59,8,39,81],[60,6,40,4],[60,10,40,8,"error"],[60,15,40,13],[60,17,40,15],[60,23,40,21,"error"],[60,28,40,26],[61,4,41,2],[61,5,41,3],[62,4,43,2],[62,10,43,8,"signUp"],[62,16,43,14],[62,19,43,17],[62,25,43,17,"signUp"],[62,26,43,24,"email"],[62,31,43,37],[62,33,43,39,"password"],[62,41,43,55],[62,43,43,57,"fullName"],[62,51,43,73],[62,56,43,78],[63,6,44,4],[63,10,44,8],[64,8,45,6],[64,14,45,12],[65,10,45,14,"data"],[65,14,45,18],[66,10,45,20,"error"],[67,8,45,26],[67,9,45,27],[67,12,45,30],[67,18,45,36,"supabase"],[67,30,45,44],[67,31,45,44,"supabase"],[67,39,45,44],[67,40,45,45,"auth"],[67,44,45,49],[67,45,45,50,"signUp"],[67,51,45,56],[67,52,45,57],[68,10,46,8,"email"],[68,15,46,13],[69,10,47,8,"password"],[69,18,47,16],[70,10,48,8,"options"],[70,17,48,15],[70,19,48,17],[71,12,49,10,"data"],[71,16,49,14],[71,18,49,16],[72,14,50,12,"full_name"],[72,23,50,21],[72,25,50,23,"fullName"],[73,12,51,10],[73,13,51,11],[74,12,52,10,"emailRedirectTo"],[74,27,52,25],[74,29,52,27,"undefined"],[75,10,53,8],[76,8,54,6],[76,9,54,7],[76,10,54,8],[77,8,56,6,"console"],[77,15,56,13],[77,16,56,14,"log"],[77,19,56,17],[77,20,56,18],[77,38,56,36],[77,40,56,38],[78,10,56,40,"data"],[78,14,56,44],[79,10,56,46,"error"],[80,8,56,52],[80,9,56,53],[80,10,56,54],[81,8,58,6],[81,12,58,10,"error"],[81,17,58,15],[81,19,58,17],[81,25,58,23,"error"],[81,30,58,28],[83,8,60,6],[84,8,61,6],[84,12,61,10,"data"],[84,16,61,14],[84,17,61,15,"session"],[84,24,61,22],[84,26,61,24],[85,10,62,8,"console"],[85,17,62,15],[85,18,62,16,"log"],[85,21,62,19],[85,22,62,20],[85,72,62,70],[85,73,62,71],[86,10,63,8,"setSession"],[86,20,63,18],[86,21,63,19,"data"],[86,25,63,23],[86,26,63,24,"session"],[86,33,63,31],[86,34,63,32],[87,10,64,8,"setUser"],[87,17,64,15],[87,18,64,16,"data"],[87,22,64,20],[87,23,64,21,"user"],[87,27,64,25],[87,28,64,26],[88,8,65,6],[88,9,65,7],[88,15,65,13],[88,19,65,17,"data"],[88,23,65,21],[88,24,65,22,"user"],[88,28,65,26],[88,32,65,30],[88,33,65,31,"data"],[88,37,65,35],[88,38,65,36,"session"],[88,45,65,43],[88,47,65,45],[89,10,66,8],[90,10,67,8,"console"],[90,17,67,15],[90,18,67,16,"log"],[90,21,67,19],[90,22,67,20],[90,70,67,68],[90,71,67,69],[91,10,68,8],[92,10,69,8],[92,16,69,14],[93,12,69,16,"data"],[93,16,69,20],[93,18,69,22,"signInData"],[93,28,69,32],[94,12,69,34,"error"],[94,17,69,39],[94,19,69,41,"signInError"],[95,10,69,53],[95,11,69,54],[95,14,69,57],[95,20,69,63,"supabase"],[95,32,69,71],[95,33,69,71,"supabase"],[95,41,69,71],[95,42,69,72,"auth"],[95,46,69,76],[95,47,69,77,"signInWithPassword"],[95,65,69,95],[95,66,69,96],[96,12,70,10,"email"],[96,17,70,15],[97,12,71,10,"password"],[98,10,72,8],[98,11,72,9],[98,12,72,10],[99,10,74,8],[99,14,74,12,"signInError"],[99,25,74,23],[99,27,74,25],[100,12,75,10,"console"],[100,19,75,17],[100,20,75,18,"error"],[100,25,75,23],[100,26,75,24],[100,47,75,45],[100,49,75,47,"signInError"],[100,60,75,58],[100,61,75,59],[101,12,76,10],[101,18,76,16],[101,22,76,20,"Error"],[101,27,76,25],[101,28,76,26],[101,100,76,98],[101,101,76,99],[102,10,77,8],[103,10,79,8],[103,14,79,12,"signInData"],[103,24,79,22],[103,25,79,23,"session"],[103,32,79,30],[103,34,79,32],[104,12,80,10,"setSession"],[104,22,80,20],[104,23,80,21,"signInData"],[104,33,80,31],[104,34,80,32,"session"],[104,41,80,39],[104,42,80,40],[105,12,81,10,"setUser"],[105,19,81,17],[105,20,81,18,"signInData"],[105,30,81,28],[105,31,81,29,"user"],[105,35,81,33],[105,36,81,34],[106,10,82,8],[107,8,83,6],[108,6,84,4],[108,7,84,5],[108,8,84,6],[108,15,84,13,"error"],[108,20,84,18],[108,22,84,20],[109,8,85,6,"console"],[109,15,85,13],[109,16,85,14,"error"],[109,21,85,19],[109,22,85,20],[109,37,85,35],[109,39,85,37,"error"],[109,44,85,42],[109,45,85,43],[110,8,86,6],[110,14,86,12,"error"],[110,19,86,17],[111,6,87,4],[112,4,88,2],[112,5,88,3],[113,4,90,2],[113,10,90,8,"signOut"],[113,17,90,15],[113,20,90,18],[113,26,90,18,"signOut"],[113,27,90,18],[113,32,90,30],[114,6,91,4],[114,12,91,10],[115,8,91,12,"error"],[116,6,91,18],[116,7,91,19],[116,10,91,22],[116,16,91,28,"supabase"],[116,28,91,36],[116,29,91,36,"supabase"],[116,37,91,36],[116,38,91,37,"auth"],[116,42,91,41],[116,43,91,42,"signOut"],[116,50,91,49],[116,51,91,50],[116,52,91,51],[117,6,92,4],[117,10,92,8,"error"],[117,15,92,13],[117,17,92,15],[117,23,92,21,"error"],[117,28,92,26],[118,4,93,2],[118,5,93,3],[119,4,95,2],[119,24,96,4],[119,28,96,4,"_reactJsxDevRuntime"],[119,47,96,4],[119,48,96,4,"jsxDEV"],[119,54,96,4],[119,56,96,5,"AuthContext"],[119,67,96,16],[119,68,96,17,"Provider"],[119,76,96,25],[120,6,96,26,"value"],[120,11,96,31],[120,13,96,33],[121,8,96,35,"session"],[121,15,96,42],[122,8,96,44,"user"],[122,12,96,48],[123,8,96,50,"loading"],[123,15,96,57],[124,8,96,59,"signIn"],[124,14,96,65],[125,8,96,67,"signUp"],[125,14,96,73],[126,8,96,75,"signOut"],[127,6,96,83],[127,7,96,85],[128,6,96,85,"children"],[128,14,96,85],[128,16,97,7,"children"],[129,4,97,15],[130,6,97,15,"fileName"],[130,14,97,15],[130,16,97,15,"_jsxFileName"],[130,28,97,15],[131,6,97,15,"lineNumber"],[131,16,97,15],[132,6,97,15,"columnNumber"],[132,18,97,15],[133,4,97,15],[133,11,98,26],[133,12,98,27],[134,2,100,0],[134,3,100,1],[135,2,102,7],[135,8,102,13,"useAuth"],[135,15,102,20],[135,18,102,23,"useAuth"],[135,19,102,23],[135,24,102,29],[136,4,103,2],[136,10,103,8,"context"],[136,17,103,15],[136,20,103,18],[136,24,103,18,"useContext"],[136,30,103,28],[136,31,103,28,"useContext"],[136,41,103,28],[136,43,103,29,"AuthContext"],[136,54,103,40],[136,55,103,41],[137,4,104,2],[137,8,104,6],[137,9,104,7,"context"],[137,16,104,14],[137,18,104,16],[138,6,105,4],[138,12,105,10],[138,16,105,14,"Error"],[138,21,105,19],[138,22,105,20],[138,67,105,65],[138,68,105,66],[139,4,106,2],[140,4,107,2],[140,11,107,9,"context"],[140,18,107,16],[141,2,108,0],[141,3,108,1],[142,0,108,2],[142,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","supabase.auth.getSession.then$argument_0","supabase.auth.onAuthStateChange$argument_0","<anonymous>","signIn","signUp","signOut","useAuth"],"mappings":"AAA;qECe;YCK;oCCE;KDI;uEEG;KFG;WGE,gCH;GDC;iBKE;GLG;iBME;GN6C;kBOE;GPG;CDO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}